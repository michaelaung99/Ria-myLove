<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>This one is for my baby</title>
    <script src="https://kit.fontawesome.com/a14ae32021.js" crossorigin="anonymous"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background: #ffe;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        #mainDiv {
            text-align: center;
        }

        #loveHeart {
            position: relative;
            width: 100%;
            height: 625px;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        #garden {
            position: absolute;
            width: 100%;
            height: 100%;
        }

        #words {
            font-family: "sans-serif";
            display: none; /* Initially hidden */
        }

        #messages {
            font-size: 30px;
            color: #666;
        }

        #elapseClock {
            font-size: 18px;
            color: #666;
            margin-top: 10px;
        }

        #loveu {
            font-size: 24px;
            color: #333;
            margin-top: 20px;
            display: none; /* Initially hidden */
        }

        .signature {
            font-size: 20px;
            font-style: italic;
        }

        #icon {
            font-size: 48px;
            color: red;
            margin: 20px;
        }
    </style>
</head>
<body>

<div id="mainDiv">
    <div id="content">
        <div id="code">
            <span class="comments">/**</span><br />
            <span class="space"/><span class="comments">*THE CODE OF LOVE</span><br />
            <span class="space"/><span class="comments">*/</span><br />
            Hey Girl!<br />
            Do you remember the day we first met?<br />
            <span class="comments">// The ET-LAB Friday. </span><br />
            Since that day a spark begun;<br />
            <span class="comments">// Your face, Your Voice, Your Words.</span><br />
            Your everything got imprinted in my heart;<br />
            As the time went on;<br />
            The Bond grew stronger and stronger;<br />
            Journey from Infatuation to Love;<br />
            We have traveled a long way together;<br />
            There have been fights ;<br />
            <span class="comments">// And I'm sure there will be more.</span><br />
            But our Bond will always grow back Stronger;<br />
            <br />
            <br />
            All I want to say is:<br />
            Baby, I will love you forever;<br />
            <br />
            <br />
            Now If you want to hug me you can touch the heart below<br />
            <br />
            <span id="heartspan">
                <a href="image.jpg"><i class="fas fa-heart" id="icon"></i></a>
            </span>
        </div>

        <div id="loveHeart">
            <canvas id="garden"></canvas>
            <div id="words">
                <div id="messages">
                    PALANG KA TAKKA SO MUCH
                </div>
                <div id="elapseClock"></div>
                <div id="loveu">
                    I LOVE YOU SO MUCH<br />
                    <div class="signature">- MICHAEL</div>
                </div>
            </div>
        </div>
    </div>
</div>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="js/functions.js"></script>
<script src="js/garden.js"></script>

<script>
// Setting up basic functions
var $window = $(window), gardenCtx, gardenCanvas, $garden, garden;
var offsetX, offsetY;

$(function () {
    // Setup garden
    var $loveHeart = $("#loveHeart");
    offsetX = $loveHeart.width() / 2;
    offsetY = $loveHeart.height() / 2 - 55;
    $garden = $("#garden");
    gardenCanvas = $garden[0];
    gardenCanvas.width = $loveHeart.width();
    gardenCanvas.height = $loveHeart.height();
    gardenCtx = gardenCanvas.getContext("2d");
    gardenCtx.globalCompositeOperation = "lighter";
    garden = new Garden(gardenCtx, gardenCanvas);
    
    $("#content").css({
        "width": $loveHeart.width() + $("#code").width(),
        "height": Math.max($loveHeart.height(), $("#code").height()),
        "margin-top": Math.max(($window.height() - $("#content").height()) / 2, 10),
        "margin-left": Math.max(($window.width() - $("#content").width()) / 2, 10)
    });

    // Render Loop for the garden animation
    setInterval(function () {
        garden.render();
    }, Garden.options.growSpeed);
});

// Function to calculate heart shape points
function getHeartPoint(angle) {
    var t = angle / Math.PI;
    var x = 19.5 * (16 * Math.pow(Math.sin(t), 3));
    var y = -20 * (13 * Math.cos(t) - 5 * Math.cos(2 * t) - 2 * Math.cos(3 * t) - Math.cos(4 * t));
    return [offsetX + x, offsetY + y];
}

// Start heart animation function
function startHeartAnimation() {
    var interval = 50;
    var angle = 10;
    var heart = [];
    var animationTimer = setInterval(function () {
        var bloom = getHeartPoint(angle);
        var draw = true;
        for (var i = 0; i < heart.length; i++) {
            var p = heart[i];
            var distance = Math.sqrt(Math.pow(p[0] - bloom[0], 2) + Math.pow(p[1] - bloom[1], 2));
            if (distance < Garden.options.bloomRadius.max * 1.3) {
                draw = false;
                break;
            }
        }
        if (draw) {
            heart.push(bloom);
            garden.createRandomBloom(bloom[0], bloom[1]);
        }
        if (angle >= 30) {
            clearInterval(animationTimer);
            showMessages();
        } else {
            angle += 0.2;
        }
    }, interval);
}

// Start the page interactions
$(document).ready(function() {
    $('#messages').text('PALANG KA TAKKA SO MUCH');
    $('#code').html('<span class="comments">/**</span><br /> <span class="comments">*THE CODE OF LOVE</span><br /> <span class="comments">*/</span><br /> Hey Girl !<br /> Do you remember the day we first met?<br /> <span class="comments">// The ET-LAB Friday. </span><br /> Since that day a spark begun;<br /> <span class="comments">// Your face Your Voice Your Words.</span><br /> Your everything got imprinted in my heart;<br /> As the time went on;<br /> The Bond grew stronger and stronger;<br /> Journey from Infatuation to Love;<br /> We have traveled a long way together;<br /> There have been fights ;<br /> <span class="comments">// And I'm sure there will be more.</span><br /> But our Bond will always grow back Stronger;<br /> <br /> <br /> All I want to say is:<br /> Baby, I will love you forever;<br /> <br /> <br /> Now If you want to hug me you can touch the heart below<br />');

    // Start typing effect
    $('#code').typewriter(function() {
        setTimeout(startHeartAnimation, 500); // Start heart animation after typing effect
    });

    // Start the time elapsed function
    var together = new Date();
    together.setDate(together.getDate() - 12); // Subtract 12 days
    together.setHours(0);
    together.setMinutes(0);
    together.setSeconds(0);
    together.setMilliseconds(0);
    window.timeElapse(together); // Call initially to set it up
    setInterval(function () {
        window.timeElapse(together);
    }, 500);
});
</script>

</body>
</html>
